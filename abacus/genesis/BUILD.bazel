load("@rules_oci//oci:defs.bzl", "oci_image")
load("@rules_pkg//pkg:pkg.bzl", "pkg_tar")

pkg_tar(
    name="genesis_tar",
    srcs=[
        "main.tf",
        "variables.tf",
        "outputs.tf",
    ],
    package_dir="/genesis",
)

oci_image(
    name="terraform_layer",
    base="@ubuntu_base",
    tars=["//terraform:terraform_tar"],
)

oci_image(
    name="source_code_layer",
    base=":terraform_layer",
    tars=[":genesis_tar"],
)
